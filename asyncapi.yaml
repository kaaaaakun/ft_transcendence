---
asyncapi: 2.1.0
info:
  title: ft_transcendence
  version: 1.0.0
  description: This API is designed for a pong game.
servers:
  localhost:
    url: 'ws://localhost/api/ws'
    protocol: ws
channels:
  /api/ws/matches:
    publish:
      operationId: sendKeyInput
      message:
        $ref: '#/components/messages/KeyInput'
    subscribe:
      operationId: onMatchStatus
      message:
        $ref: '#/components/messages/MatchStatus'

components:
  messages:
    KeyInput:
      payload:
        type: object
        properties:
          left:
            $ref: '#/components/schemas/KeyInput'
          right:
            $ref: '#/components/schemas/KeyInput'
    MatchStatus:
      payload:
        type: object
        required:
          - left
          - right
          - ballPosition
        properties:
          left:
            $ref: '#/components/schemas/PlayerStatus'
          right:
            $ref: '#/components/schemas/PlayerStatus'
          ballPosition:
            $ref: '#/components/schemas/BallPosition'

  schemas:
    KeyInput:
      type: object
      required:
        - isUp
      properties:
        isUp:
          type: boolean
    BallPosition:
      type: object
      required:
        - x
        - y
      properties:
        x:
          type: number
          format: floa
    PlayerStatus:
      type: object
      required:
        - paddlePosition
        - score
      properties:
        paddlePosition:
          type: number
          format: float
        score:
          type: integer

