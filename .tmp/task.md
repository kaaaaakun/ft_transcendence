# ブロックチェーン用SSH設定自動生成機能 - タスクリスト

## Phase 1: 基本実装

### 1. ディレクトリ構造の準備
- [ ] `blockchain/ssh/` ディレクトリ作成
- [ ] `blockchain/ssh/keys/` ディレクトリ作成
- [ ] `blockchain/ssh/config/` ディレクトリ作成
- [ ] `blockchain/ssh/scripts/` ディレクトリ作成

### 2. SSH鍵生成スクリプト作成
- [ ] `blockchain/ssh/scripts/generate-ssh-keys.sh` スクリプト作成
- [ ] RSA 4096bit鍵の生成機能
- [ ] 環境別鍵の命名規則実装（dev, staging, prod）
- [ ] 鍵ファイルの権限設定（600）

### 3. SSH設定ファイル生成スクリプト作成
- [ ] `blockchain/ssh/scripts/generate-ssh-config.sh` スクリプト作成
- [ ] SSH設定テンプレートファイル作成
- [ ] 環境変数から設定値を読み込む機能
- [ ] `~/.ssh/config`への設定追加機能

### 4. 環境変数設定ファイル作成
- [ ] `.env.blockchain.sample` ファイル作成
- [ ] 必要な環境変数の定義
- [ ] 設定項目のドキュメント化

## Phase 2: Makefile統合

### 5. Makefileターゲット追加
- [ ] `ssh-setup` ターゲット追加
- [ ] `ssh-keygen` ターゲット追加
- [ ] `ssh-config` ターゲット追加
- [ ] `ssh-clean` ターゲット追加
- [ ] 既存のMakefileとの統合

### 6. 依存関係の設定
- [ ] `cert` ターゲットとの依存関係設定
- [ ] `build` ターゲットでのSSH設定の自動実行
- [ ] エラーハンドリングの実装

## Phase 3: セキュリティ強化

### 7. セキュリティ機能実装
- [ ] 秘密鍵の存在チェック
- [ ] 既存設定のバックアップ機能
- [ ] `.gitignore`への鍵ファイル追加
- [ ] 設定ファイルの検証機能

### 8. 環境別設定管理
- [ ] 開発環境用設定
- [ ] ステージング環境用設定
- [ ] 本番環境用設定
- [ ] 環境切り替え機能

## Phase 4: ドキュメント・テスト

### 9. ドキュメント作成
- [ ] `blockchain/ssh/README.md` 作成
- [ ] 使用方法の説明
- [ ] トラブルシューティング
- [ ] セキュリティに関する注意事項

### 10. テスト・検証
- [ ] 新規環境でのテスト
- [ ] 既存環境への影響確認
- [ ] エラーケースのテスト
- [ ] クリーンアップ機能のテスト

## Phase 5: 最終確認

### 11. 統合テスト
- [ ] 全体の動作確認
- [ ] 他の開発者での動作確認
- [ ] パフォーマンステスト
- [ ] セキュリティチェック

### 12. 最終調整
- [ ] コードレビュー
- [ ] ドキュメントの最終確認
- [ ] リファクタリング
- [ ] 最終テスト

---

## 注意事項

- 秘密鍵は絶対にリポジトリにコミットしない
- SSH設定は既存の設定を破壊しないよう注意
- 環境変数の扱いに注意
- 権限設定は適切に行う

## 完了条件

- [ ] `make ssh-setup` で完全なSSH環境が構築される
- [ ] 環境別の設定が適切に分離される
- [ ] セキュリティ要件が満たされる
- [ ] ドキュメントが完備される
- [ ] 他の開発者が使用可能である